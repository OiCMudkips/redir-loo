<!DOCTYPE html>
<head>
    <title>redir-loo | My Links</title>
    <meta charset="UTF-8"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed&subset=latin,latin-ext" rel="stylesheet" type="text/css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" rel="stylesheet" type="text/css"/>
    <link href="styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
    <div id="top-header">
    <menu class="header-content" role="menubar" type="toolbar">
        <li class="left">
            <a href="/">Home</a>
        </li>
        {if user}
        <li class="right">
            <a href="/logout">Logout</a>
        </li>
        {else}
        <li class="right">
            <a href="/login">Login</a>
        </li>
        {/if}
    </menu>
    </div>
    
    <div id="content">
    <h1>{user}'s Links</h1>
    {if rows.length}
    <button class="open-popup">Add Link</button>
    <table>
        <tr><th>Destination</th><th>Shortened Link</th></tr>
        {for row in rows}
        <tr>
            <td>{row.url}</td>
            <td>http://placeholder.com/{row.shortened}</td>
        </tr>
        {/for}
    </table>
    <button class="open-popup">Add Link</button>
    {else}
    <p>We didn't find any links for you. Add one now!</p>
    <button class="open-popup">Add Link</button>
    {/if}
    
    <div id="bottom-header">
    <menu class="header-content" role="menubar" type="toolbar">
        <li class="right">
            <a href="/author">About the Author</a>
        </li>
        <li class="right">
            <a href="https://github.com/OiCMudkips/redir-loo">Source Code</a>
        </li>
        <li class="right">
            <div>Facebook Link</div>
        </li>
    </menu>
    </div>

    <div id="add-link-overlay" style="display: none">
        <button id="close-overlay">X</button>
        <input id="url" type="url" autocomplete="url">
        <button id="add-link">Add</button>
    </div>
    <script>
        var openPopup = function() {
            document.getElementById("add-link-overlay").style.display = "block";
        };

        var closePopup = function() {
            document.getElementById("add-link-overlay").style.display = "none";
        };

        var overlayOpeners = document.getElementsByClassName("open-popup");
        Array.prototype.forEach.call(overlayOpeners, function(current) {
            current.addEventListener("click", openPopup);
        });
        document.getElementById("close-overlay").addEventListener("click", closePopup);
    </script>
</body>
